# 履带车SAC训练场景设计指南

## 核心原则
智能体只会学习它所见过的东西，因此场景的多样性和难度递进至关重要。

## 场景分类与设计

### 1. 基础路径规划场景 (30% 训练时间)

#### 1.1 直线路径场景
- **目标**: 学习基本的速度控制
- **设计**: 长直道，无障碍物
- **变体**: 
  - 不同长度的直道 (100m, 200m, 500m)
  - 不同起始速度
  - 不同目标位置

#### 1.2 弯道场景
- **目标**: 学习转向控制
- **设计**: 不同曲率的弯道
- **变体**:
  - 小曲率弯道 (半径 > 50m)
  - 中等曲率弯道 (半径 20-50m)
  - 大曲率弯道 (半径 10-20m)
  - S型弯道
  - 连续弯道

#### 1.3 复杂路径场景
- **目标**: 学习路径规划能力
- **设计**: 包含多个转向点的路径
- **变体**:
  - 直角转弯
  - 连续转向
  - 回字形路径
  - 螺旋路径

### 2. 静态避障场景 (25% 训练时间)

#### 2.1 单障碍物避障
- **目标**: 学习基本避障策略
- **设计**: 路径上放置单个静态障碍物
- **变体**:
  - 不同大小的障碍物
  - 不同位置的障碍物
  - 不同形状的障碍物

#### 2.2 多障碍物避障
- **目标**: 学习复杂避障策略
- **设计**: 多个静态障碍物
- **变体**:
  - 障碍物集群
  - 障碍物走廊
  - 障碍物迷宫

### 3. 动态避障场景 (35% 训练时间)

#### 3.1 对向行驶场景
- **目标**: 学习对向避障
- **设计**: 对向行驶的车辆
- **变体**:
  - 不同速度的对向车辆
  - 不同轨迹的对向车辆
  - 多辆对向车辆

#### 3.2 交叉路口场景
- **目标**: 学习交叉路口避障
- **设计**: 十字路口或T字路口
- **变体**:
  - 不同角度的交叉
  - 不同数量的交叉车辆
  - 不同优先级的交叉

#### 3.3 跟车与超车场景
- **目标**: 学习跟车和超车策略
- **设计**: 前方有慢车
- **变体**:
  - 不同速度的前车
  - 不同行为的前车（匀速、变速、停车）
  - 多车道超车

#### 3.4 复杂动态场景
- **目标**: 学习复杂动态环境下的决策
- **设计**: 多种动态元素组合
- **变体**:
  - 弯道中的动态避障
  - 多车交互场景
  - 突发情况处理

### 4. 边界感知场景 (10% 训练时间)

#### 4.1 窄道场景
- **目标**: 学习边界感知和精确控制
- **设计**: 狭窄的可行驶区域
- **变体**:
  - 不同宽度的窄道
  - 弯曲的窄道
  - 有障碍物的窄道

#### 4.2 边界约束场景
- **目标**: 学习在边界约束下的路径规划
- **设计**: 复杂的边界形状
- **变体**:
  - 不规则边界
  - 动态边界
  - 多区域边界

## 场景难度递进策略

### 阶段1: 基础训练 (Episodes 1-500)
- 70% 基础路径规划场景
- 20% 静态避障场景
- 10% 简单动态避障场景

### 阶段2: 避障训练 (Episodes 501-1200)
- 30% 基础路径规划场景
- 30% 静态避障场景
- 35% 动态避障场景
- 5% 边界感知场景

### 阶段3: 综合训练 (Episodes 1201-2000)
- 20% 基础路径规划场景
- 20% 静态避障场景
- 45% 复杂动态避障场景
- 15% 边界感知场景

## 场景参数设置建议

### 车辆参数
```python
# 不同难度级别的车辆参数
easy_params = {
    'max_speed': 3.0,
    'a_max': 1.5,
    'b_max': 2.0,
    'omega_abs_max': 0.5
}

medium_params = {
    'max_speed': 5.0,
    'a_max': 2.0,
    'b_max': 3.0,
    'omega_abs_max': 0.8
}

hard_params = {
    'max_speed': 7.0,
    'a_max': 2.5,
    'b_max': 4.0,
    'omega_abs_max': 1.0
}
```

### 环境参数
```python
# 不同场景的环境参数
scenario_params = {
    'timeout': 300,  # 5分钟超时
    'collision_threshold': 2.0,  # 碰撞阈值
    'goal_tolerance': 5.0,  # 目标容差
    'safety_distance': 15.0  # 安全距离
}
```

## 场景生成工具建议

### 1. 随机场景生成器
- 随机生成障碍物位置和数量
- 随机生成车辆轨迹
- 随机生成环境参数

### 2. 难度自适应生成器
- 根据训练进度调整场景难度
- 根据成功率调整场景复杂度
- 根据失败类型调整场景类型

### 3. 场景验证器
- 验证场景的可解性
- 验证场景的合理性
- 验证场景的多样性

## 训练监控指标

### 1. 成功率指标
- 到达目标成功率
- 避障成功率
- 边界遵守率

### 2. 效率指标
- 平均完成时间
- 平均路径长度
- 平均速度

### 3. 安全指标
- 碰撞率
- 越界率
- 最小安全距离

## 实施建议

1. **渐进式训练**: 从简单场景开始，逐步增加复杂度
2. **平衡采样**: 确保各类场景的平衡采样
3. **动态调整**: 根据训练效果动态调整场景比例
4. **持续监控**: 实时监控训练指标，及时调整策略
5. **定期评估**: 定期在测试集上评估模型性能
